#!/usr/bin/env bash
# bin/compile <build-dir> <cache-dir>

echo "-----> Installing Ghostscript 9.52"

BUILD_DIR=$1
PACKAGE="https://github.com/ArtifexSoftware/ghostpdl-downloads/releases/download/gs952/ghostscript-9.52-linux-x86_64.tgz"
LOCATION="$BUILD_DIR/vendor/gs/bin"

mkdir -p $LOCATION
wget $PACKAGE

echo "-----> Building runtime environment for Ghostscript"

tar xvf ghostscript-9.52-linux-x86_64.tgz
cd ghostscript-9.52-linux-x86_64
./configure --disable-cups --disable-gtk --with-drivers=FILES
make
cp bin/gs ~/bin

echo "Ghostscript version:"
echo gs --version

cd ~
rm -rf ghostscript-9.52*
